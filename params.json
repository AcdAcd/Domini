{"name":"Domini","tagline":"Mon projet domotique DIY-Arduino-Jeenode-Linux/ My Home automation project DIY-Arduino-Jeenode-Linux","body":"Domini\r\n======\r\n\r\nMon projet domotique / My Home automation project\r\n\r\n((BROUILLON))\r\n======\r\n\r\n#Intro\r\n\r\n\r\n![Domini architecture](/docs/Synoptique_DoMini.png)\r\n\r\n\r\n#Pré-requis\r\n\r\n##Plateforme\r\nLe serveur de la domotique est une machine Linux. \r\n\r\nLe projet ne nécessite que peu de ressources, jusqu'en aout 2014 il tournait sur un **Sheevaplug** :\r\n\r\n- *Linux DEBIAN 6 Lenny*\r\n- *ARM v5 1.2GHz*\r\n- *RAM 512 Mo*\r\n- *Flash 512 Mo* \r\n- *Lecteur SDCard (remplacé au bout de 6 mois par un disque dur USB car la SDCard ne supportait pas les nombreuses écritures)*\r\n- *1 port USB*\r\n- *1 port Ethernet*\r\n\r\nLe projet Domini ayant atteint une certaine maturité et ayant acquis une place presque indispensable dans la maison (gestion du chauffage, volets et bientôt l'alarme) j'ai voulu fiabilisé le serveur.\r\nPour cela, j'ai migré du sheevaplug vers un **PC Barebone** (mon ancien PC recyclé) avec des disques dur montés en RAID1 et avec un peu plus de puissance pour réaliser les tâches (serveur web, sauvegarde base de données,...).\r\n\r\nVoici les caractéristiques du PC (à titre d'information, cela n'indique pas le minimum nécessaire)\r\n\r\n- *Linux DEBIAN 7*\r\n- *PC x86 : Intel P4*\r\n- *RAM : 2Go*\r\n- *Disque dur : 2 x 80 Go ( montés en RAID1)*\r\n- *1 port USB*\r\n- *Wifi b/g/n*\r\n- *Reseau Ethernet 10/100Mbps (optionnel une fois le wifi installé)*\r\n\r\n#Paquets et logiciels\r\n\r\nLa liste des paquets installés sur ma machine est disponible sur le dépôt :\r\n\r\n\t~/serveur/systeme/dpkg.txt\r\n\r\nDans les grandes lignes voici ce qui est essentiel pour le projet :\r\n\r\n- Serveur web : lighttpd\r\n- Base de données : MySQL\r\n- PHP\r\n- GD (lib graphique pour HTML)\r\n- serveur FTP : vsftp (pour récupération images des cameras IP)\r\n- GCC (pour compiler les applications faites en C)\r\n*Il existe certainement des dépendances ...*\r\n\r\n\r\nPour le développement, mise au point ou confort, j'utilise également :\r\n\r\n- Samba\r\n- Webmin\r\n- Git\r\n- screen\r\n\r\n\r\n\r\n#Notes pour l'installation ou la migration vers un nouveau PC\r\n\r\n## BASE DE DONNEES\r\n\r\nFichier contenant la structure de la base :\r\n\r\n\t~/serveur/bdd/struct_domotique.sql\r\n\t\r\nFichier contenant l'exportation de toutes les données (non disponible sur le dépot git car du domaine privé)\r\nL'importation de gros fichiers n'est pas possible via phpmyadmin, il faut utiliser mysql en ligne de commande:\r\n\r\n \tmysql --user=root --password=mysql domotique < \t ~/serveur/bdd/backup_domotique/backup-domotique.sql\r\n \r\n \r\n## INTERFACE WEB\r\n\r\nfaire un lien symbolique de ~/serveur/www/domini vers /var/www/domini\r\n\r\n\tln -s ~/serveur/www/domini /var/www/domini\r\n\r\n**ATTENTION** : il ne faut pas avoir créé /var/www/domini avant de créér le lien symbolique\r\n\r\n\r\najouter le multihost dans lighttp.conf\r\n\r\n\t ### Ajout virtual host Webcam ###\r\n\t$SERVER[\"socket\"] == \":82\" {\r\n\t server.document-root = \"/var/www/webcam/\"\r\n\t server.errorlog = \"/var/log/lighttpd/webcam/error.log\"\r\n\t }\r\n\r\n\t\t \r\n## SYSTEME\r\n### Crontab:\r\n\t\r\nImporter les taches CRON listées dans ce fichier :\r\n\r\n\t~/serveur/systeme/crontab.txt\r\n\t\r\nCommande à éxécuter :\r\n\r\n\tcrontab crontab.txt\r\n\r\n## Logiciel\r\nRecompiler tous les logiciels directement sur la cible avec 'Make'\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}